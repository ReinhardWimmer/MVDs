<!DOCTYPE HTML>

<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <link rel="stylesheet" type="text/css" href="../../../ifc-styles.css">

    <link rel="stylesheet" type="text/css" href="../../../details-shim.css">
    <script type="text/javascript" src="../../../details-shim.js"></script>
    <title>IfcBSplineSurface</title>

    <style type="text/css">
      body { counter-reset: index1 8 index2 9 index3 3 index4 8 index5 0; }
    </style>
  </head>

  <body>

<p>Draft: Update of the IFC 2x3 based FM Handover View to IFC4 Add 2</p>

<script type="text/javascript">
<!--
    parent.index.location.replace("../../toc-8.htm#8.9.3.9");
//-->
</script>

<h4 class="num">IfcBSplineSurface</h4>
<p><b><u>Change log</u></b></p>
<table class="gridtable">
<tr><th>Item</th><th>SPF</th><th>XML</th><th>Change</th><th>Description</th></tr>
<td colspan=5><b><a href="../../../annex/annex-f/ifc2x3-to-ifc4/index.htm">IFC2x3 to IFC4</a></b></td>
<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../../schema/ifcgeometryresource/lexical/ifcbsplinesurface.htm">IfcBSplineSurface</a></td><td></td><td></td><td>ADDED</td><td></td></tr>
</table>
<p></p>
<section>
<h5 class="num">Semantic definitions at the entity</h5>
<p><b><u>Entity definition</u></b></p>
<p>The <span class="self-ref">IfcBSplineSurface</span> is a general form of rational or polynomial parametric surface.</p>
<blockquote class="extDef">NOTE&nbsp; Definition according to ISO/CD 10303-42:1992<br>
A b_spline_surface is a general form of rational or polynomial parametric surface which is represented by control
points, basis functions, and possibly, weights. As with the corresponding curve entity it has some special subtypes
where some of the data can be derived.
<ol style="list-style-type:lower-roman; font-size:inherit;">
<li style=" font-size:inherit;">The symbology used here is:
<table border="0" cellpadding="2" cellspacing="0" summary="symbology" style=" font-size:inherit;">
<tr style=" font-size:inherit;">
<td align="right" width="100" style=" font-size:inherit;"><i>K</i>1</td>
<td align="left" style=" font-size:inherit;">= upper_index_on_u_control_points</td>
</tr>
<tr style=" font-size:inherit;">
<td align="right" width="100" style=" font-size:inherit;"><i>K</i>2</td>
<td align="left" style=" font-size:inherit;">= upper_index_on_v_control_points</td>
</tr>
<tr style=" font-size:inherit;">
<td align="right" width="100" style=" font-size:inherit;"><b>P</b><sub>ij</sub></td>
<td align="left" style=" font-size:inherit;">= control_points</td>
</tr>
<tr style=" font-size:inherit;">
<td align="right" width="100" style=" font-size:inherit;">w<sub>ij</sub></td>
<td align="left" style=" font-size:inherit;">= weights</td>
</tr>
<tr style=" font-size:inherit;">
<td align="right" width="100" style=" font-size:inherit;"><i>d</i>1</td>
<td align="left" style=" font-size:inherit;">= u_degree</td>
</tr>
<tr style=" font-size:inherit;">
<td align="right" width="100" style=" font-size:inherit;"><i>d</i>2</td>
<td align="left" style=" font-size:inherit;">= v_degree</td>
</tr>
</table>
<br></li>
<li style=" font-size:inherit;">The control points are ordered as
<blockquote style=" font-size:inherit;">P<sub>00</sub>, P<sub>01</sub>, P<sub>02</sub>, ......,
P<sub><i>K</i>1(<i>K</i>2-1)</sub>, P<sub><i>K</i>1<i>K</i>2</sub></blockquote>
The weights, in the case of the rational subtype, are ordered similarly.<br>
<br></li>
<li style=" font-size:inherit;">For each parameter, <i>s</i> = <i>u</i> or <i>v</i>, if <i>k</i> is the upper
index on the control points and <i>d</i> is the degree for <i>s</i>, the knot array is an array of (<i>k</i> +
<i>d</i> + 2) real numbers [s<sub>-d</sub>, ...., s<sub><i>k</i>+1</sub>], such that for all indices j in
[-<i>d</i>, <i>k</i>]; <i>s</i><sub><i>j</i></sub> &le; <i>s</i><sub><i>j</i>+1</sub>. This array is
obtained from the appropriate u_knots or v_knots list by repeating each multiple knot according to the
multiplicity.<br>
<br>
N<sub><i>i</i></sub><sup><i>d</i></sup>, the <i>i</i>th normalised B-spline basis function of degree <i>d</i>,
is defined on the subset [<i>s</i><sub>i-<i>d</i></sub>, ...., <i>s</i><sub><i>i</i>+1</sub>] of this
array.<br>
<br></li>
<li style=" font-size:inherit;">Let <i>L</i> denote the number of distinct values amongst the knots in the knot list;
<i>L</i> will be referred to as the &lsquo;upper index on knots&rsquo;. Let <i>m</i><sub><i>j</i></sub> denote
the multiplicity (i.e., number of repetitions) of the <i>j</i>th distinct knot value. Then:
<blockquote><img src="../../../figures/ifcbsplinecurve-math2.gif" alt="formula" border="0"></blockquote>
All knot multiplicities except the first and the last shall be in the range 1, ...., <i>d</i>; the first and last may
have a maximum value of <i>d</i>+1. In evaluating the basis functions, a knot <i>u</i> of, e.g., multiplicity 3 is
interpreted as a sequence <i>u</i>, <i>u</i>, <i>u</i>, in the knot array.<br>
<br></li>
<li style=" font-size:inherit;">The surface form is used to identify specific quadric surface types (which shall have
degree two), ruled surfaces and surfaces of revolution. As with the b-spline curve, the surface form is informational
only and the spline data takes precedence.<br>
<br></li>
<li style=" font-size:inherit;">The surface is to be interpreted as follows: In the polynomial case the surface is
given by the equation:
<blockquote><img src="../../../figures/ifcbsplinesurface-math1.gif" alt="formula" border></blockquote>
In the rational case the surface equation is:
<blockquote><img src="../../../figures/ifcbsplinesurface-math2.gif" alt="formula" border></blockquote>
</li>
</ol>
</blockquote>
<blockquote class="note">NOTE&nbsp; Entity adapted from <strong>b_spline_surface</strong> defined in
ISO10303-42.</blockquote>
<blockquote class="history">HISTORY&nbsp; New entity in IFC4.</blockquote><p></p>
<p><b><u>Attribute definitions</u></b></p>
<table class="attributes">
<tr><th>#</th><th>Attribute</th><th>Type</th><th>Cardinality</th><th>Description</th>
<th>B</th></tr>
<tr><td>1</td><td>UDegree</td><td><a href="../../ifcmeasureresource/lexical/ifcinteger.htm">IfcInteger</a></td><td></td><td>
Algebraic degree of basis functions in <i>u</i>.</td><td>X</td></tr>
<tr><td>2</td><td>VDegree</td><td><a href="../../ifcmeasureresource/lexical/ifcinteger.htm">IfcInteger</a></td><td></td><td>
Algebraic degree of basis functions in <i>v</i>.</td><td>X</td></tr>
<tr><td>3</td><td>ControlPointsList</td><td><a href="../../ifcgeometryresource/lexical/ifccartesianpoint.htm">IfcCartesianPoint</a></td><td>L[2:?] L[2:?]</td><td>
This is a list of lists of control points.</td><td>X</td></tr>
<tr><td>4</td><td>SurfaceForm</td><td><a href="../../ifcgeometryresource/lexical/ifcbsplinesurfaceform.htm">IfcBSplineSurfaceForm</a></td><td></td><td>
Indicator of special surface types.</td><td>X</td></tr>
<tr><td>5</td><td>UClosed</td><td><a href="../../ifcmeasureresource/lexical/ifclogical.htm">IfcLogical</a></td><td></td><td>
Indication of whether the surface is closed in the <i>u</i> direction; this is for information only.</td><td>X</td></tr>
<tr><td>6</td><td>VClosed</td><td><a href="../../ifcmeasureresource/lexical/ifclogical.htm">IfcLogical</a></td><td></td><td>
Indication of whether the surface is closed in the <i>v</i> direction; this is for information only.</td><td>X</td></tr>
<tr><td>7</td><td>SelfIntersect</td><td><a href="../../ifcmeasureresource/lexical/ifclogical.htm">IfcLogical</a></td><td></td><td>
Flag to indicate whether, or not, surface is self-intersecting; this is for information only.</td><td>X</td></tr>
<tr><td></td><td>UUpper<br/>:=SIZEOF(ControlPointsList) - 1</td><td><a href="../../ifcmeasureresource/lexical/ifcinteger.htm">IfcInteger</a></td><td></td><td>Upper index on control points in <i>u</i> direction.</td>
<td>X</td></tr>
<tr><td></td><td>VUpper<br/>:=SIZEOF(ControlPointsList[1]) - 1</td><td><a href="../../ifcmeasureresource/lexical/ifcinteger.htm">IfcInteger</a></td><td></td><td>Upper index on control points in <i>v</i> direction.</td>
<td>X</td></tr>
<tr><td></td><td>ControlPoints<br/>:=IfcMakeArrayOfArray(ControlPointsList,
0,UUpper,0,VUpper)</td><td><a href="../../ifcgeometryresource/lexical/ifccartesianpoint.htm">IfcCartesianPoint</a></td><td>A[0:UUpper] A[0:VUpper]</td><td>Array (two-dimensional) of control points defining surface geometry. This array is constructed from the control points list.</td>
<td>X</td></tr>
</table>
<p></p>
</section>
</section>
<section>
<h5 class="num">Formal representations</h5>
<p><b><u>XML Specification</u></b></p>
<div class="xsd"><code class="xsd">&nbsp;&lt;xs:element name=&quot;<a href="../../ifcgeometryresource/lexical/ifcbsplinesurface.htm">IfcBSplineSurface</a>&quot; type=&quot;ifc:<a href="../../ifcgeometryresource/lexical/ifcbsplinesurface.htm">IfcBSplineSurface</a>&quot; abstract=&quot;true&quot; substitutionGroup=&quot;ifc:<a href="../../ifcgeometryresource/lexical/ifcboundedsurface.htm">IfcBoundedSurface</a>&quot; nillable=&quot;true&quot;/&gt;<br/>
&nbsp;&lt;xs:complexType name=&quot;<a href="../../ifcgeometryresource/lexical/ifcbsplinesurface.htm">IfcBSplineSurface</a>&quot; abstract=&quot;true&quot;&gt;<br/>
&nbsp;&nbsp;&lt;xs:complexContent&gt;<br/>
&nbsp;&nbsp;&nbsp;&lt;xs:extension base=&quot;ifc:<a href="../../ifcgeometryresource/lexical/ifcboundedsurface.htm">IfcBoundedSurface</a>&quot;&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;xs:sequence&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;xs:element name=&quot;ControlPointsList&quot;&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;xs:complexType&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;xs:sequence&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;xs:element ref=&quot;ifc:<a href="../../ifcgeometryresource/lexical/ifccartesianpoint.htm">IfcCartesianPoint</a>&quot; minOccurs=&quot;4&quot; maxOccurs=&quot;unbounded&quot;/&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/xs:sequence&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;xs:attribute ref=&quot;ifc:itemType&quot; fixed=&quot;ifc:<a href="../../ifcgeometryresource/lexical/ifccartesianpoint.htm">IfcCartesianPoint</a>&quot;/&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;xs:attribute ref=&quot;ifc:cType&quot; fixed=&quot;list list&quot;/&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;xs:attribute ref=&quot;ifc:arraySize&quot; use=&quot;optional&quot;/&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/xs:complexType&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/xs:element&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/xs:sequence&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;xs:attribute name=&quot;UDegree&quot; type=&quot;ifc:<a href="../../ifcmeasureresource/lexical/ifcinteger.htm">IfcInteger</a>&quot; use=&quot;optional&quot;/&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;xs:attribute name=&quot;VDegree&quot; type=&quot;ifc:<a href="../../ifcmeasureresource/lexical/ifcinteger.htm">IfcInteger</a>&quot; use=&quot;optional&quot;/&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;xs:attribute name=&quot;SurfaceForm&quot; type=&quot;ifc:<a href="../../ifcgeometryresource/lexical/ifcbsplinesurfaceform.htm">IfcBSplineSurfaceForm</a>&quot; use=&quot;optional&quot;/&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;xs:attribute name=&quot;UClosed&quot; type=&quot;ifc:<a href="../../ifcmeasureresource/lexical/ifclogical.htm">IfcLogical</a>&quot; use=&quot;optional&quot;/&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;xs:attribute name=&quot;VClosed&quot; type=&quot;ifc:<a href="../../ifcmeasureresource/lexical/ifclogical.htm">IfcLogical</a>&quot; use=&quot;optional&quot;/&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;xs:attribute name=&quot;SelfIntersect&quot; type=&quot;ifc:<a href="../../ifcmeasureresource/lexical/ifclogical.htm">IfcLogical</a>&quot; use=&quot;optional&quot;/&gt;<br/>
&nbsp;&nbsp;&nbsp;&lt;/xs:extension&gt;<br/>
&nbsp;&nbsp;&lt;/xs:complexContent&gt;<br/>
&nbsp;&lt;/xs:complexType&gt;<br/>
</code></div><p></p>
<p><b><u>EXPRESS Specification</u></b></p>
<div class="express"><code class="express">
*)<br/>
<span class="keyword">ENTITY</span> IfcBSplineSurface<br/>
&nbsp;<span class="keyword">ABSTRACT</span> <span class="keyword">SUPERTYPE OF</span>(<a href="../../ifcgeometryresource/lexical/ifcbsplinesurfacewithknots.htm">IfcBSplineSurfaceWithKnots</a>)<br/>
&nbsp;<span class="keyword">SUBTYPE OF</span> (<a href="../../ifcgeometryresource/lexical/ifcboundedsurface.htm">IfcBoundedSurface</a>)<b>;</b><br/>
&nbsp;&nbsp;UDegree : <a href="../../ifcmeasureresource/lexical/ifcinteger.htm">IfcInteger</a>;<br/>
&nbsp;&nbsp;VDegree : <a href="../../ifcmeasureresource/lexical/ifcinteger.htm">IfcInteger</a>;<br/>
&nbsp;&nbsp;ControlPointsList : <span class="keyword">LIST</span> [2:?] <span class="keyword">OF</span> <span class="keyword">LIST</span> [2:?] <span class="keyword">OF</span> <a href="../../ifcgeometryresource/lexical/ifccartesianpoint.htm">IfcCartesianPoint</a>;<br/>
&nbsp;&nbsp;SurfaceForm : <a href="../../ifcgeometryresource/lexical/ifcbsplinesurfaceform.htm">IfcBSplineSurfaceForm</a>;<br/>
&nbsp;&nbsp;UClosed : <a href="../../ifcmeasureresource/lexical/ifclogical.htm">IfcLogical</a>;<br/>
&nbsp;&nbsp;VClosed : <a href="../../ifcmeasureresource/lexical/ifclogical.htm">IfcLogical</a>;<br/>
&nbsp;&nbsp;SelfIntersect : <a href="../../ifcmeasureresource/lexical/ifclogical.htm">IfcLogical</a>;<br/>
&nbsp;<span class="keyword">DERIVE</span><br/>
&nbsp;&nbsp;UUpper : <a href="../../ifcmeasureresource/lexical/ifcinteger.htm">IfcInteger</a> := SIZEOF(ControlPointsList) - 1;<br/>
&nbsp;&nbsp;VUpper : <a href="../../ifcmeasureresource/lexical/ifcinteger.htm">IfcInteger</a> := SIZEOF(ControlPointsList[1]) - 1;<br/>
&nbsp;&nbsp;ControlPoints : <span class="keyword">ARRAY</span> [0:UUpper] OF <span class="keyword">ARRAY</span> [0:VUpper] OF <a href="../../ifcgeometryresource/lexical/ifccartesianpoint.htm">IfcCartesianPoint</a> := IfcMakeArrayOfArray(ControlPointsList,
0,UUpper,0,VUpper);<br/>
<span class="keyword">END_ENTITY;</span><br/>
(*<br/>
<p class="std"><a href="../../../annex/annex-d/ifcgeometryresource/diagram_0010.htm" ><img src="../../../img/diagram.png" style="border: 0px" title="Link to EXPRESS-G diagram" alt="Link to EXPRESS-G diagram">&nbsp;EXPRESS-G diagram</a></p>
</code></div>
<p></p>
</section>
<p><a href="http://jira.buildingsmart.org/issues/?jql=project%20%3D%20IFR%20AND%20text%20~%20%22ifcbsplinesurface%22" target="_blank" ><img src="../../../img/external.png" style="border: 0px" title="Report issue" alt="Report issue"/>&nbsp; Report an issue</a></p>
<p><a href="../../../link/ifcbsplinesurface.htm" target="_top" ><img src="../../../img/permlink.png" style="border: 0px" title="Link to this page" alt="Link to this page"/>&nbsp; Link to this page</a></p>
<p>By Reinhard Wimmer</p>
  </body>
</html>
