<!DOCTYPE HTML>

<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <link rel="stylesheet" type="text/css" href="../../../ifc-styles.css">

    <link rel="stylesheet" type="text/css" href="../../../details-shim.css">
    <script type="text/javascript" src="../../../details-shim.js"></script>
    <title>IfcBSplineCurve</title>

    <style type="text/css">
      body { counter-reset: index1 8 index2 9 index3 3 index4 6 index5 0; }
    </style>
  </head>

  <body>

<p>Draft: Update of the IFC 2x3 based FM Handover View to IFC4 Add 2</p>

<script type="text/javascript">
<!--
    parent.index.location.replace("../../toc-8.htm#8.9.3.7");
//-->
</script>

<h4 class="num">IfcBSplineCurve</h4>
<section>
<h5 class="num">Semantic definitions at the entity</h5>
<p><b><u>Entity definition</u></b></p>
<p>The <span class="self-ref">IfcBSplineCurve</span> is a spline curve parameterized by spline functions.</p>
<p>Figure 176 illustrates a B-spline curve.</p>
<blockquote class="note">NOTE&nbsp; Figure quoted from ISO 10303-42.</blockquote>
<table summary="illustration">
<tr>
<td><img src="../../../figures/ifcbsplinecurve-fig1.gif" alt="control points" width="520" height="200" border="0"></td>
</tr>
<tr>
<td>
<p class="figure">Figure 176 &mdash; B-spline curve</p>
</td>
</tr>
</table>
<blockquote class="extDef">NOTE&nbsp; Definition according to ISO/CD 10303-42:1992<br>
A B-spline curve is a piecewise parametric polynomial or rational curve described in terms of control points and basis
functions. The B-spline curve has been selected as the most stable format to represent all types of polynomial or
rational parametric curves. With appropriate attribute values it is capable of representing single span or spline
curves of explicit polynomial, rational, Bezier or B-spline type.<br>
<br>
Interpretation of the data is as follows:
<ol style=" font-size:inherit;">
<li style=" font-size:inherit;">
<p style=" font-size:inherit;">All weights shall be positive and the curve is given by</p>
<img src="../../../figures/ifcbsplinecurve-math1.gif" alt="equation" width="183" height="115" border="0">
<table summary="illustration" style=" font-size:inherit;">
<tr style=" font-size:inherit;">
<td align="right" width="100" style=" font-size:inherit;"><i>k</i>+1</td>
<td style=" font-size:inherit;">= number of control points</td>
</tr>
<tr style=" font-size:inherit;">
<td align="right" width="100" style=" font-size:inherit;">P<sub><i>i</i></sub></td>
<td style=" font-size:inherit;">= control points</td>
</tr>
<tr style=" font-size:inherit;">
<td align="right" width="100" style=" font-size:inherit;"><i>w</i><sub><i>i</i></sub></td>
<td>= weights</td>
</tr>
<tr style=" font-size:inherit;">
<td align="right" width="100" style=" font-size:inherit;"><i>d</i></td>
<td>= degree</td>
</tr>
</table>
<p style=" font-size:inherit;">The knot array is an array of (<i>k</i>+<i>d</i>+2) real numbers
[<i>u</i><sub>-<i>d</i></sub> ... <i>u</i><sub><i>k</i>+1</sub>], such that for all indices j in
[-<i>d</i>,<i>k</i>], <i>u</i><sub>j</sub> &lt;= <i>u</i><sub>j+1</sub>. This array is obtained from the knot
data list by repeating each multiple knot according to the multiplicity. <i>N <sup>d</sup><sub>i</sub></i>, the
<i>i</i>th normalized B-spline basis function of degree <i>d</i>, is defined on the subset
[<i>u<sub>i-d</sub></i>, ... , <i>u<sub>i+1</sub></i>] of this array.</p>
</li>
<li style=" font-size:inherit;">
<p style=" font-size:inherit;">Let <i>L</i> denote the number of distinct values among the <i>d</i>+<i>k</i>+2
knots in the knot array; <i>L</i> will be referred to as the 'upper index on knots'. Let <i>m<sub>j</sub></i>
denote the multiplicity (number of repetitions) of the <i>j</i>th distinct knot. Then</p>
<img src="../../../figures/ifcbsplinecurve-math2.gif" alt="equation" width="149" height="59" border="0">
<p style=" font-size:inherit;">All knot multiplicities except the first and the last shall be in the range 1 ...
degree; the first and last may have a maximum value of degree + 1. In evaluating the basis functions, a knot <i>u</i>
of e.g. multiplicity 3 is interpreted as a string <i>u, u, u,</i> in the knot array. The B-spline curve has 3 special
subtypes (<i>Note: only 1, Bezier curve, included in this IFC release</i>) where the knots and knot multiplicities
are derived to provide simple default capabilities.</p>
</li>
<li style=" font-size:inherit;">Logical flag is provided to indicate whether the curve self intersects or not.</li>
</ol>
</blockquote>
<blockquote class="note">NOTE&nbsp; Entity adapted from <strong>b_spline_curve</strong> defined in
ISO10303-42.</blockquote>
<blockquote class="history">HISTORY&nbsp; New entity in IFC2x2.</blockquote><p></p>
<p><b><u>Attribute definitions</u></b></p>
<table class="attributes">
<tr><th>#</th><th>Attribute</th><th>Type</th><th>Cardinality</th><th>Description</th>
<th>B</th></tr>
<tr><td>1</td><td>Degree</td><td><a href="../../ifcmeasureresource/lexical/ifcinteger.htm">IfcInteger</a></td><td></td><td>
The algebraic degree of the basis functions.</td><td>X</td></tr>
<tr><td>2</td><td>ControlPointsList</td><td><a href="../../ifcgeometryresource/lexical/ifccartesianpoint.htm">IfcCartesianPoint</a></td><td>L[2:?]</td><td>
The list of control points for the curve.</td><td>X</td></tr>
<tr><td>3</td><td>CurveForm</td><td><a href="../../ifcgeometryresource/lexical/ifcbsplinecurveform.htm">IfcBSplineCurveForm</a></td><td></td><td>
Used to identify particular types of curve; it is for information only.</td><td>X</td></tr>
<tr><td>4</td><td>ClosedCurve</td><td><a href="../../ifcmeasureresource/lexical/ifclogical.htm">IfcLogical</a></td><td></td><td>
Indication of whether the curve is closed; it is for information only.</td><td>X</td></tr>
<tr><td>5</td><td>SelfIntersect</td><td><a href="../../ifcmeasureresource/lexical/ifclogical.htm">IfcLogical</a></td><td></td><td>
Indication whether the curve self-intersects or not; it is for information only.</td><td>X</td></tr>
<tr><td></td><td>UpperIndexOnControlPoints<br/>:=(SIZEOF(ControlPointsList) - 1)</td><td><a href="../../ifcmeasureresource/lexical/ifcinteger.htm">IfcInteger</a></td><td></td><td>The upper index on the array of control points; the lower index is 0.
This value is derived from the control points list.</td>
<td>X</td></tr>
<tr><td></td><td>ControlPoints<br/>:=IfcListToArray(ControlPointsList,0,UpperIndexOnControlPoints)</td><td><a href="../../ifcgeometryresource/lexical/ifccartesianpoint.htm">IfcCartesianPoint</a></td><td>A[0:UpperIndexOnControlPoints]</td><td>The array of control points used to define the geometry of the curve. This is derived from the list of control points.</td>
<td>X</td></tr>
</table>
<p></p>
<p><b><u>Formal Propositions</u></b></p>
<table class="propositions">
<tr><th>Rule</th><th>Description</th></tr>
<tr><td>SameDim</td><td>All control points shall have the same dimensionality.</td></tr>
</table>

<p></p>
</section>
</section>
<section>
<h5 class="num">Formal representations</h5>
<p><b><u>XML Specification</u></b></p>
<div class="xsd"><code class="xsd">&nbsp;&lt;xs:element name=&quot;<a href="../../ifcgeometryresource/lexical/ifcbsplinecurve.htm">IfcBSplineCurve</a>&quot; type=&quot;ifc:<a href="../../ifcgeometryresource/lexical/ifcbsplinecurve.htm">IfcBSplineCurve</a>&quot; abstract=&quot;true&quot; substitutionGroup=&quot;ifc:<a href="../../ifcgeometryresource/lexical/ifcboundedcurve.htm">IfcBoundedCurve</a>&quot; nillable=&quot;true&quot;/&gt;<br/>
&nbsp;&lt;xs:complexType name=&quot;<a href="../../ifcgeometryresource/lexical/ifcbsplinecurve.htm">IfcBSplineCurve</a>&quot; abstract=&quot;true&quot;&gt;<br/>
&nbsp;&nbsp;&lt;xs:complexContent&gt;<br/>
&nbsp;&nbsp;&nbsp;&lt;xs:extension base=&quot;ifc:<a href="../../ifcgeometryresource/lexical/ifcboundedcurve.htm">IfcBoundedCurve</a>&quot;&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;xs:sequence&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;xs:element name=&quot;ControlPointsList&quot;&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;xs:complexType&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;xs:sequence&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;xs:element ref=&quot;ifc:<a href="../../ifcgeometryresource/lexical/ifccartesianpoint.htm">IfcCartesianPoint</a>&quot; minOccurs=&quot;2&quot; maxOccurs=&quot;unbounded&quot;/&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/xs:sequence&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;xs:attribute ref=&quot;ifc:itemType&quot; fixed=&quot;ifc:<a href="../../ifcgeometryresource/lexical/ifccartesianpoint.htm">IfcCartesianPoint</a>&quot;/&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;xs:attribute ref=&quot;ifc:cType&quot; fixed=&quot;list&quot;/&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;xs:attribute ref=&quot;ifc:arraySize&quot; use=&quot;optional&quot;/&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/xs:complexType&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/xs:element&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/xs:sequence&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;xs:attribute name=&quot;Degree&quot; type=&quot;ifc:<a href="../../ifcmeasureresource/lexical/ifcinteger.htm">IfcInteger</a>&quot; use=&quot;optional&quot;/&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;xs:attribute name=&quot;CurveForm&quot; type=&quot;ifc:<a href="../../ifcgeometryresource/lexical/ifcbsplinecurveform.htm">IfcBSplineCurveForm</a>&quot; use=&quot;optional&quot;/&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;xs:attribute name=&quot;ClosedCurve&quot; type=&quot;ifc:<a href="../../ifcmeasureresource/lexical/ifclogical.htm">IfcLogical</a>&quot; use=&quot;optional&quot;/&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;xs:attribute name=&quot;SelfIntersect&quot; type=&quot;ifc:<a href="../../ifcmeasureresource/lexical/ifclogical.htm">IfcLogical</a>&quot; use=&quot;optional&quot;/&gt;<br/>
&nbsp;&nbsp;&nbsp;&lt;/xs:extension&gt;<br/>
&nbsp;&nbsp;&lt;/xs:complexContent&gt;<br/>
&nbsp;&lt;/xs:complexType&gt;<br/>
</code></div><p></p>
<p><b><u>EXPRESS Specification</u></b></p>
<div class="express"><code class="express">
*)<br/>
<span class="keyword">ENTITY</span> IfcBSplineCurve<br/>
&nbsp;<span class="keyword">ABSTRACT</span> <span class="keyword">SUPERTYPE OF</span>(<a href="../../ifcgeometryresource/lexical/ifcbsplinecurvewithknots.htm">IfcBSplineCurveWithKnots</a>)<br/>
&nbsp;<span class="keyword">SUBTYPE OF</span> (<a href="../../ifcgeometryresource/lexical/ifcboundedcurve.htm">IfcBoundedCurve</a>)<b>;</b><br/>
&nbsp;&nbsp;Degree : <a href="../../ifcmeasureresource/lexical/ifcinteger.htm">IfcInteger</a>;<br/>
&nbsp;&nbsp;ControlPointsList : <span class="keyword">LIST</span> [2:?] <span class="keyword">OF</span> <a href="../../ifcgeometryresource/lexical/ifccartesianpoint.htm">IfcCartesianPoint</a>;<br/>
&nbsp;&nbsp;CurveForm : <a href="../../ifcgeometryresource/lexical/ifcbsplinecurveform.htm">IfcBSplineCurveForm</a>;<br/>
&nbsp;&nbsp;ClosedCurve : <a href="../../ifcmeasureresource/lexical/ifclogical.htm">IfcLogical</a>;<br/>
&nbsp;&nbsp;SelfIntersect : <a href="../../ifcmeasureresource/lexical/ifclogical.htm">IfcLogical</a>;<br/>
&nbsp;<span class="keyword">DERIVE</span><br/>
&nbsp;&nbsp;UpperIndexOnControlPoints : <a href="../../ifcmeasureresource/lexical/ifcinteger.htm">IfcInteger</a> := (SIZEOF(ControlPointsList) - 1);<br/>
&nbsp;&nbsp;ControlPoints : <span class="keyword">ARRAY</span> [0:UpperIndexOnControlPoints] OF <a href="../../ifcgeometryresource/lexical/ifccartesianpoint.htm">IfcCartesianPoint</a> := IfcListToArray(ControlPointsList,0,UpperIndexOnControlPoints);<br/>
&nbsp;<span class="keyword">WHERE</span><br/>
&nbsp;&nbsp;SameDim : SIZEOF(QUERY(Temp &lt;* ControlPointsList |<br/>
  Temp.Dim &lt;&gt; ControlPointsList[1].Dim))<br/>
= 0;<br/><span class="keyword">END_ENTITY;</span><br/>
(*<br/>
<p class="std"><a href="../../../annex/annex-d/ifcgeometryresource/diagram_0007.htm" ><img src="../../../img/diagram.png" style="border: 0px" title="Link to EXPRESS-G diagram" alt="Link to EXPRESS-G diagram">&nbsp;EXPRESS-G diagram</a></p>
</code></div>
<p></p>
</section>
<p><a href="http://jira.buildingsmart.org/issues/?jql=project%20%3D%20IFR%20AND%20text%20~%20%22ifcbsplinecurve%22" target="_blank" ><img src="../../../img/external.png" style="border: 0px" title="Report issue" alt="Report issue"/>&nbsp; Report an issue</a></p>
<p><a href="../../../link/ifcbsplinecurve.htm" target="_top" ><img src="../../../img/permlink.png" style="border: 0px" title="Link to this page" alt="Link to this page"/>&nbsp; Link to this page</a></p>
<p>By Reinhard Wimmer</p>
  </body>
</html>
